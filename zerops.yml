zerops:
  - setup: airflow
    build:
      deployFiles:
        - dags
    run:
      os: ubuntu
      base: python@3.12
      envVariables:
        AIRFLOW_HOME: /var/www/airflow
        AIRFLOW__CORE__LOAD_EXAMPLES: "False"
        AIRFLOW__CORE__DAGS_FOLDER: /var/www/dags
      prepareCommands:
        - |
          cd /var/www
          uv venv
          source .venv/bin/activate
          uv pip install --upgrade pip
          uv pip install "apache-airflow==2.10.5" --constraint "https://raw.githubusercontent.com/apache/airflow/constraints-2.10.5/constraints-3.12.txt"
        # HERE YOU CAN INSTALL OTHER PIP PACKAGES IF NEEDED
      ports:
        - port: 8080
          httpSupport: true
      start: |
        source .venv/bin/activate
        airflow standalone